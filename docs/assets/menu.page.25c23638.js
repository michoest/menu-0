import{u as _e,a as ye,b as ke,c as Se,w as ee,v as j,x as $,A as we,z as Ce,_ as z,o as te,m as ne,s as ae,y as W,n as qe,Q as Ie,q as Te,t as pe}from"./QCard.a1d5c5c8.js";import{c as J,o as le,h as b,a0 as Le,aw as Be,u as oe,r as C,a as k,x as O,w as $e,af as Qe,d as Ae,g as ie,Q as D,s as ue,ax as Me,ay as je,az as Re,aA as Ve,R as De,ab as X,ac as Ee,H as I,I as M,J as m,K as f,ah as P,aj as H,ai as G,ag as L,ak as T,U as E,aB as Ne,M as F,i as Oe,aC as Pe,j as He,ad as Y}from"./index.141acc0c.js";import{i as se,h as re,u as ze,Q as K,f as Ke}from"./store.1cb23d58.js";import{Q as Ue}from"./QPage.a2b2a512.js";import"./axios.ab682c6b.js";import"./notify.a04065c9.js";var Ge=J({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:w,emit:g}){let c=!1,h,i,d=null,x=null,_,r;function s(){h&&h(),h=null,c=!1,d!==null&&(clearTimeout(d),d=null),x!==null&&(clearTimeout(x),x=null),i!==void 0&&i.removeEventListener("transitionend",_),_=null}function u(n,a,y){a!==void 0&&(n.style.height=`${a}px`),n.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,c=!0,h=y}function t(n,a){n.style.overflowY=null,n.style.height=null,n.style.transition=null,s(),a!==r&&g(a)}function o(n,a){let y=0;i=n,c===!0?(s(),y=n.offsetHeight===n.scrollHeight?0:void 0):(r="hide",n.style.overflowY="hidden"),u(n,y,a),d=setTimeout(()=>{d=null,n.style.height=`${n.scrollHeight}px`,_=S=>{x=null,(Object(S)!==S||S.target===n)&&t(n,"show")},n.addEventListener("transitionend",_),x=setTimeout(_,e.duration*1.1)},100)}function v(n,a){let y;i=n,c===!0?s():(r="show",n.style.overflowY="hidden",y=n.scrollHeight),u(n,y,a),d=setTimeout(()=>{d=null,n.style.height=0,_=S=>{x=null,(Object(S)!==S||S.target===n)&&t(n,"hide")},n.addEventListener("transitionend",_),x=setTimeout(_,e.duration*1.1)},100)}return le(()=>{c===!0&&s()}),()=>b(Le,{css:!1,appear:e.appear,onEnter:o,onLeave:v},w.default)}});const A=Be({}),Fe=Object.keys(oe);var Ye=J({name:"QExpansionItem",props:{...oe,..._e,...se,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...ye,"click","afterShow","afterHide"],setup(e,{slots:w,emit:g}){const{proxy:{$q:c}}=ie(),h=re(e,c),i=C(e.modelValue!==null?e.modelValue:e.defaultOpened),d=C(null),x=ke(),{show:_,hide:r,toggle:s}=Se({showing:i});let u,t;const o=k(()=>`q-expansion-item q-item-type q-expansion-item--${i.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),v=k(()=>{if(e.contentInsetLevel===void 0)return null;const l=c.lang.rtl===!0?"Right":"Left";return{["padding"+l]:e.contentInsetLevel*56+"px"}}),n=k(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),a=k(()=>{const l={};return Fe.forEach(p=>{l[p]=e[p]}),l}),y=k(()=>n.value===!0||e.expandIconToggle!==!0),S=k(()=>e.expandedIcon!==void 0&&i.value===!0?e.expandedIcon:e.expandIcon||c.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),U=k(()=>e.disable!==!0&&(n.value===!0||e.expandIconToggle===!0)),Q=k(()=>({expanded:i.value===!0,detailsId:x.value,toggle:s,show:_,hide:r})),q=k(()=>{const l=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:c.lang.label[i.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":i.value===!0?"true":"false","aria-controls":x.value,"aria-label":l}});O(()=>e.group,l=>{t!==void 0&&t(),l!==void 0&&Z()});function B(l){n.value!==!0&&s(l),g("click",l)}function V(l){l.keyCode===13&&R(l,!0)}function R(l,p){p!==!0&&d.value!==null&&d.value.focus(),s(l),ue(l)}function de(){g("afterShow")}function me(){g("afterHide")}function Z(){u===void 0&&(u=ze()),i.value===!0&&(A[e.group]=u);const l=O(i,N=>{N===!0?A[e.group]=u:A[e.group]===u&&delete A[e.group]}),p=O(()=>A[e.group],(N,xe)=>{xe===u&&N!==void 0&&N!==u&&r()});t=()=>{l(),p(),A[e.group]===u&&delete A[e.group],t=void 0}}function fe(){const l={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},p=[b(D,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&i.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:S.value})];return U.value===!0&&(Object.assign(l,{tabindex:0,...q.value,onClick:R,onKeyup:V}),p.unshift(b("div",{ref:d,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),b($,l,()=>p)}function he(){let l;return w.header!==void 0?l=[].concat(w.header(Q.value)):(l=[b($,()=>[b(j,{lines:e.labelLines},()=>e.label||""),e.caption?b(j,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&l[e.switchToggleSide===!0?"push":"unshift"](b($,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>b(D,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&l[e.switchToggleSide===!0?"unshift":"push"](fe()),l}function ve(){const l={ref:"item",style:e.headerStyle,class:e.headerClass,dark:h.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return y.value===!0&&(l.clickable=!0,l.onClick=B,Object.assign(l,n.value===!0?a.value:q.value)),b(ee,l,he)}function ge(){return $e(b("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:v.value,id:x.value},Ae(w.default)),[[Qe,i.value]])}function be(){const l=[ve(),b(Ge,{duration:e.duration,onShow:de,onHide:me},ge)];return e.expandSeparator===!0&&l.push(b(K,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:h.value}),b(K,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:h.value})),l}return e.group!==void 0&&Z(),le(()=>{t!==void 0&&t()}),()=>b("div",{class:o.value},[b("div",{class:"q-expansion-item__container relative-position"},be())])}});const Je={xs:8,sm:10,md:14,lg:20,xl:24};var Ze=J({name:"QChip",props:{...se,...Me,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:w,emit:g}){const{proxy:{$q:c}}=ie(),h=re(e,c),i=je(e,Je),d=k(()=>e.selected===!0||e.icon!==void 0),x=k(()=>e.selected===!0?e.iconSelected||c.iconSet.chip.selected:e.icon),_=k(()=>e.iconRemove||c.iconSet.chip.remove),r=k(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),s=k(()=>{const a=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(a?` text-${a} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(r.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(h.value===!0?" q-chip--dark q-dark":"")}),u=k(()=>{const a=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},y={...a,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||c.lang.label.remove};return{chip:a,remove:y}});function t(a){a.keyCode===13&&o(a)}function o(a){e.disable||(g("update:selected",!e.selected),g("click",a))}function v(a){(a.keyCode===void 0||a.keyCode===13)&&(ue(a),e.disable===!1&&(g("update:modelValue",!1),g("remove")))}function n(){const a=[];r.value===!0&&a.push(b("div",{class:"q-focus-helper"})),d.value===!0&&a.push(b(D,{class:"q-chip__icon q-chip__icon--left",name:x.value}));const y=e.label!==void 0?[b("div",{class:"ellipsis"},[e.label])]:void 0;return a.push(b("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},Ve(w.default,y))),e.iconRight&&a.push(b(D,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&a.push(b(D,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:_.value,...u.value.remove,onClick:v,onKeyup:v})),a}return()=>{if(e.modelValue===!1)return;const a={class:s.value,style:i.value};return r.value===!0&&Object.assign(a,u.value.chip,{onClick:o,onKeyup:t}),Re("div",a,n(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[De,e.ripple]])}}}),ce={exports:{}};(function(e,w){(function(g,c){e.exports=c()})(we,function(){return function(g,c,h){g=g||{};var i=c.prototype,d={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function x(r,s,u,t){return i.fromToBase(r,s,u,t)}h.en.relativeTime=d,i.fromToBase=function(r,s,u,t,o){for(var v,n,a,y=u.$locale().relativeTime||d,S=g.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],U=S.length,Q=0;Q<U;Q+=1){var q=S[Q];q.d&&(v=t?h(r).diff(u,q.d,!0):u.diff(r,q.d,!0));var B=(g.rounding||Math.round)(Math.abs(v));if(a=v>0,B<=q.r||!q.r){B<=1&&Q>0&&(q=S[Q-1]);var V=y[q.l];o&&(B=o(""+B)),n=typeof V=="string"?V.replace("%d",B):V(B,s,q.l,a);break}}if(s)return n;var R=a?y.future:y.past;return typeof R=="function"?R(n):R.replace("%s",n)},i.to=function(r,s){return x(r,s,this,!0)},i.from=function(r,s){return x(r,s,this)};var _=function(r){return r.$u?h.utc():h()};i.toNow=function(r){return this.to(_(this),r)},i.fromNow=function(r){return this.from(_(this),r)}}})})(ce);var We=ce.exports;const Xe={__name:"chooseIngredients.dialog.component",props:X({dishes:Array},{modelValue:{},modelModifiers:{}}),emits:X(["add"],["update:modelValue"]),setup(e,{emit:w}){Ce.extend(We);const g=Ee(e,"modelValue"),c=e,h=w,i=C(z.cloneDeep(c.dishes));C(null),C({show:!1}),C({show:!1,dish:null,ingredient:{}});const d=C({show:!1,dish:null,ingredient:null});O(()=>c.dishes,s=>{i.value=z.cloneDeep(s)});const x=()=>{const s=i.value.flatMap(u=>u.dish.ingredients);h("add",s),g.value=!1},_=(s,u,t)=>{d.value.dish=s,d.value.ingredient=u,d.value.show=!0},r=async(s,u)=>{s.dish.ingredients.splice(u,1)};return(s,u)=>(I(),M(Ie,{modelValue:g.value,"onUpdate:modelValue":u[0]||(u[0]=t=>g.value=t),position:"bottom"},{default:m(()=>[f(te,{style:{width:"350px"},class:"q-pa-sm"},{default:m(()=>[f(ne,null,{default:m(()=>[f(ae,null,{default:m(()=>[(I(!0),P(H,null,G(i.value,t=>(I(),P(H,{key:t.dish._id},[f(j,{header:""},{default:m(()=>[L(T(t.dish.title)+" ("+T(t.amount)+" Portionen)",1)]),_:2},1024),(I(!0),P(H,null,G(t.dish.ingredients,(o,v)=>(I(),M(ee,{key:v},{default:m(()=>[f($,{side:"",top:""},{default:m(()=>[f(E,{size:"12px",flat:"",dense:"",round:"",color:"negative",icon:"remove_circle_outline",onClick:Ne(n=>r(t,v),["stop"])},null,8,["onClick"])]),_:2},1024),f($,{clickable:"",onClick:n=>_(t,o)},{default:m(()=>[f(j,null,{default:m(()=>[L(T(o.name)+" ",1),o.subdish?(I(),M(W,{key:0,class:"q-mx-sm",color:"secondary"},{default:m(()=>[L(T(o.subdish),1)]),_:2},1024)):F("",!0),o.optional?(I(),M(W,{key:1,class:"q-mx-sm"},{default:m(()=>[L("Optional")]),_:1})):F("",!0)]),_:2},1024),f(j,{caption:""},{default:m(()=>[L(T(o.amount.value)+" "+T(o.amount.unit),1)]),_:2},1024)]),_:2},1032,["onClick"]),f($,{side:"",top:""},{default:m(()=>[f(Ze,{removable:"","model-value":!!o.due,onRemove:n=>o.due=null,class:"q-mx-sm",outline:"",color:"primary","text-color":"white"},{default:m(()=>[L(T(o.due.fromNow()),1)]),_:2},1032,["model-value","onRemove"])]),_:2},1024)]),_:2},1024))),128))],64))),128))]),_:1})]),_:1}),f(K,{inset:""}),f(qe,{align:"right"},{default:m(()=>[f(E,{flat:"",color:"primary",label:"Add to list",onClick:x})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},et={class:"text-grey-8 q-gutter-xs flex items-center"},tt=Y("span",{class:"text-bold"},"Zutaten pro Portion:",-1),st=Object.assign({name:"ListPage"},{__name:"menu.page",setup(e){Te();const w=Oe("notify"),g=Pe();C(!1);const c=C(!0);C("");const h=C({show:!1,dishes:[]}),i=Ke(),d=C([]),x=function(t){t.amount=t.amount==0?t.dish.standardAmount:t.amount+1,c.value=!1},_=function(t){t.amount-=1,c.value=z.sum(d.value.map(o=>o.amount))==0},r=()=>{h.value.dishes=z.cloneDeep(d.value.filter(t=>t.amount>0)),h.value.dishes.forEach(t=>{t.dish.ingredients.forEach(o=>{o.amount.value=o.amount.unit!=null?o.amount.value*t.amount:o.amount.value})}),h.value.show=!0},s=async t=>{await i.addToList(t)&&w("Ingredients added to list!",{actions:[{label:"Show",color:"white",handler:()=>{g.push("/list")}}]}),d.value.forEach(o=>o.amount=0),c.value=!0};He(async()=>{await i.fetchMenu(),d.value=i.menu.dishes.map(t=>({dish:t,amount:0})).sort((t,o)=>t.dish.title.localeCompare(o.dish.title))});const u=t=>t.amount.unit==null?t.name:t.amount.unit==""?`${t.amount.value} ${t.name}`:`${t.amount.value} ${t.amount.unit} ${t.name}`;return(t,o)=>(I(),M(Ue,null,{default:m(()=>[d.value.length>0?(I(),M(ae,{key:0,class:"q-pt-md"},{default:m(()=>[(I(!0),P(H,null,G(d.value,v=>(I(),M(Ye,{"expand-icon-toggle":"","switch-toggle-side":"",key:v.dish.id,"content-inset-level":1},{header:m(()=>[f($,null,{default:m(()=>[f(j,null,{default:m(()=>[L(T(v.dish.title),1)]),_:2},1024),f(j,{caption:""},{default:m(()=>[L("\xDCbliche Menge: "+T(v.dish.standardAmount),1)]),_:2},1024)]),_:2},1024),f($,{side:""},{default:m(()=>[Y("div",et,[f(E,{color:"red",disable:v.amount==0,flat:"",round:"",icon:"remove",onClick:n=>_(v)},null,8,["disable","onClick"]),Y("span",null,T(v.amount),1),f(E,{color:"green",flat:"",round:"",icon:"add",onClick:n=>x(v)},null,8,["onClick"])])]),_:2},1024)]),default:m(()=>[f(te,null,{default:m(()=>[f(ne,null,{default:m(()=>[tt,L(" "+T(v.dish.ingredients.map(n=>u(n)).join(", ")),1)]),_:2},1024),f(K,{inset:""})]),_:2},1024)]),_:2},1024))),128))]),_:1})):F("",!0),f(pe,{position:"bottom",offset:[0,18],style:{"z-index":"6000"}},{default:m(()=>[f(E,{fab:"",icon:"checklist",color:"accent",onClick:r,disabled:c.value},null,8,["disabled"])]),_:1}),f(Xe,{"model-value":h.value.show,"onUpdate:modelValue":o[0]||(o[0]=v=>h.value.show=v),dishes:h.value.dishes,onAdd:s},null,8,["model-value","dishes"])]),_:1}))}});export{st as default};
