import{a as J,Q as X}from"./store.3996886f.js";import{u as Z,a as G,b as ee,c as te,d as ae,Q as le,e as V,_ as ne,f as Q,g as oe,h as B,i as ie,j as se}from"./lodash.e39200ef.js";import{a as u,c as Y,i as K,h as f,U as C,z as ce,V as U,g as H,Q as T,n as W,r as A,p as re,d as ue,j as de,H as b,I as g,J as c,W as x,X as D,Y as L,K as i,L as N,M as P,Z as I,_ as w,$ as be,a0 as fe}from"./index.047a1eb8.js";import{Q as me}from"./QPage.78403980.js";import"./axios.ab682c6b.js";import"./notify.26cc0ef6.js";const ve=["top","right","bottom","left"],M={type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:e=>ve.includes(e)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]};function E(e,a){return{formClass:u(()=>`q-fab--form-${e.square===!0?"square":"rounded"}`),stacked:u(()=>e.externalLabel===!1&&["top","bottom"].includes(e.labelPosition)),labelProps:u(()=>{if(e.externalLabel===!0){const s=e.hideLabel===null?a.value===!1:e.hideLabel;return{action:"push",data:{class:[e.labelClass,`q-fab__label q-tooltip--style q-fab__label--external q-fab__label--external-${e.labelPosition}`+(s===!0?" q-fab__label--external-hidden":"")],style:e.labelStyle}}}return{action:["left","top"].includes(e.labelPosition)?"unshift":"push",data:{class:[e.labelClass,`q-fab__label q-fab__label--internal q-fab__label--internal-${e.labelPosition}`+(e.hideLabel===!0?" q-fab__label--internal-hidden":"")],style:e.labelStyle}}})}}const R={start:"self-end",center:"self-center",end:"self-start"},ge=Object.keys(R);var j=Y({name:"QFabAction",props:{...M,icon:{type:String,default:""},anchor:{type:String,validator:e=>ge.includes(e)},to:[String,Object],replace:Boolean},emits:["click"],setup(e,{slots:a,emit:s}){const t=K(U,()=>({showing:{value:!0},onChildClick:ce})),{formClass:h,labelProps:m}=E(e,t.showing),_=u(()=>{const o=R[e.anchor];return h.value+(o!==void 0?` ${o}`:"")}),p=u(()=>e.disable===!0||t.showing.value!==!0);function y(o){t.onChildClick(o),s("click",o)}function k(){const o=[];return a.icon!==void 0?o.push(a.icon()):e.icon!==""&&o.push(f(T,{name:e.icon})),(e.label!==""||a.label!==void 0)&&o[m.value.action](f("div",m.value.data,a.label!==void 0?a.label():[e.label])),W(a.default,o)}const S=H();return Object.assign(S.proxy,{click:y}),()=>f(C,{class:_.value,...e,noWrap:!0,stack:e.stacked,icon:void 0,label:void 0,noCaps:!0,fabMini:!0,disable:p.value,onClick:y},k)}});const he=["up","right","down","left"],_e=["left","center","right"];var pe=Y({name:"QFab",props:{...M,...Z,icon:String,activeIcon:String,hideIcon:Boolean,hideLabel:{...M.hideLabel,default:null},direction:{type:String,default:"right",validator:e=>he.includes(e)},persistent:Boolean,verticalActionsAlign:{type:String,default:"center",validator:e=>_e.includes(e)}},emits:G,setup(e,{slots:a}){const s=A(null),t=A(e.modelValue===!0),h=ee(),{proxy:{$q:m}}=H(),{formClass:_,labelProps:p}=E(e,t),y=u(()=>e.persistent!==!0),{hide:k,toggle:S}=te({showing:t,hideOnRouteChange:y}),o=u(()=>({opened:t.value})),$=u(()=>`q-fab z-fab row inline justify-center q-fab--align-${e.verticalActionsAlign} ${_.value}`+(t.value===!0?" q-fab--opened":" q-fab--closed")),n=u(()=>`q-fab__actions flex no-wrap inline q-fab__actions--${e.direction} q-fab__actions--${t.value===!0?"opened":"closed"}`),d=u(()=>{const l={id:h.value,role:"menu"};return t.value!==!0&&(l["aria-hidden"]="true"),l}),v=u(()=>`q-fab__icon-holder  q-fab__icon-holder--${t.value===!0?"opened":"closed"}`);function q(l,z){const F=a[l],O=`q-fab__${l} absolute-full`;return F===void 0?f(T,{class:O,name:e[z]||m.iconSet.fab[z]}):f("div",{class:O},F(o.value))}function r(){const l=[];return e.hideIcon!==!0&&l.push(f("div",{class:v.value},[q("icon","icon"),q("active-icon","activeIcon")])),(e.label!==""||a.label!==void 0)&&l[p.value.action](f("div",p.value.data,a.label!==void 0?a.label(o.value):[e.label])),W(a.tooltip,l)}return re(U,{showing:t,onChildClick(l){k(l),s.value!==null&&s.value.$el.focus()}}),()=>f("div",{class:$.value},[f(C,{ref:s,class:_.value,...e,noWrap:!0,stack:e.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0,"aria-expanded":t.value===!0?"true":"false","aria-haspopup":"true","aria-controls":h.value,onClick:S},r),f("div",{class:n.value,...d.value},ue(a.default))])}});const ye={class:"q-gutter-md"},Ce={key:1,class:"flex justify-center"},$e=Object.assign({name:"ListPage"},{__name:"list.page",setup(e){ae();const a=K("notify"),s=A(!0),t=J(),h=n=>new Promise(d=>setTimeout(d,n)),m=u(()=>t.list.length==0?[]:ne.uniq(t.list.map(d=>d.category)).sort().map(d=>({title:d,items:t.list.filter(v=>v.category==d&&(["open","almost-completed"].includes(v.status)||s.value))})).filter(d=>d.items.length>0)),_=()=>{},p=async()=>{},y=async()=>{},k=async n=>{s.value=!s.value},S=async n=>{n.status="almost-completed",await h(500),await t.completeItem(n.id),a(`${n.name} completed!`,{actions:[{label:"Undo",color:"white",handler:()=>{t.openItem(n.id)}}]})},o=async n=>{await t.openItem(n.id),a(`${n.name} re-opened!`,{actions:[{label:"Undo",color:"white",handler:()=>{t.completeItem(n.id)}}]})},$=async n=>{};return de(async()=>{await t.fetchList()}),(n,d)=>(b(),g(me,null,{default:c(()=>[m.value.length>0?(b(),g(le,{key:0,class:"q-pt-md"},{default:c(()=>[(b(!0),x(L,null,D(m.value,(v,q)=>(b(),x(L,{key:q},[q>0?(b(),g(X,{key:0,inset:""})):P("",!0),i(Q,{header:""},{default:c(()=>[I(w(v.title||"(Keine Kategorie)"),1)]),_:2},1024),(b(!0),x(L,null,D(v.items,r=>(b(),g(oe,{key:r.id},{default:c(()=>[i(B,{side:"",top:""},{default:c(()=>[r.status=="open"?(b(),g(C,{key:0,size:"12px",flat:"",dense:"",round:"",icon:"radio_button_unchecked",onClick:l=>S(r)},null,8,["onClick"])):["almost-completed","completed"].includes(r.status)?(b(),g(C,{key:1,size:"12px",flat:"",dense:"",round:"",icon:"done",onClick:l=>o(r)},null,8,["onClick"])):P("",!0)]),_:2},1024),i(B,null,{default:c(()=>[i(Q,null,{default:c(()=>{var l;return[I(w(r.name)+" ",1),(l=r.due)!=null&&l.date?(b(),g(ie,{key:0,class:"q-mx-sm",color:"accent"},{default:c(()=>[I(w(N(se)(r.due.date).format("YYYY-MM-DD")),1)]),_:2},1024)):P("",!0)]}),_:2},1024),i(Q,{caption:""},{default:c(()=>[I(w(r.notes),1)]),_:2},1024)]),_:2},1024),i(B,{side:""},{default:c(()=>[be("div",ye,[i(C,{size:"12px",flat:"",dense:"",round:"",icon:"more_horiz",onClick:fe(l=>$(r),["stop"])},null,8,["onClick"])])]),_:2},1024)]),_:2},1024))),128))],64))),128))]),_:1})):(b(),x("div",Ce,[i(T,{color:"positive",name:"done",size:"104px",class:"q-pa-xl"})])),i(V,{position:"bottom",offset:[0,18],style:{"z-index":"6000"}},{default:c(()=>[i(C,{fab:"",icon:"add",color:"accent",onClick:_})]),_:1}),i(V,{position:"bottom-right",offset:[26,26]},{default:c(()=>[i(pe,{color:"primary",icon:"more_vert",direction:"up",padding:"sm"},{default:c(()=>[i(j,{onClick:p,icon:"remove_done","external-label":"","label-position":"left",label:"Delete completed items"}),i(j,{onClick:y,disable:N(t).list.length==0,icon:"delete_sweep","external-label":"","label-position":"left",label:"Clear all"},null,8,["disable"]),i(j,{onClick:k,icon:s.value?"visibility_off":"visibility","external-label":"","label-position":"left",label:s.value?"Hide completed items":"Show completed items"},null,8,["icon","label"])]),_:1})]),_:1})]),_:1}))}});export{$e as default};
